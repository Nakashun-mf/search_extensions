# カスタム検索ボックス

複数のカスタム検索ボックスを設定・利用できるブラウザ拡張機能です。

## 概要

「カスタム検索ボックス」は、ウェブ検索のワークフローを劇的に改善するためのChromeブラウザ拡張機能です。この拡張機能を使うことで、ユーザーは頻繁に利用する検索サイトや特定のキーワードでの検索（例: 辞書サイトでの単語検索、特定の技術ドキュメントサイトでの検索）を、ブラウザのポップアップやオプションページから直接、迅速に実行できるようになります。手動で検索サイトにアクセスし、検索フォームにキーワードを入力する手間を省き、より効率的な情報収集を可能にします。

## 機能詳細

### 1. 柔軟な検索ボックス作成機能

* **簡単モード**: Google検索をベースにした、直感的な設定が可能です。例えば、「wiki」というラベルで検索ボックスを作成し、「先頭に付ける文字列」として「Wikipedia」と設定することで、入力欄に「AI」と入力して検索すると、自動的にGoogleで「Wikipedia AI」と検索されるようになります。これにより、特定の情報源に限定した検索を効率的に行えます。
* **カスタムモード**: 任意のウェブサイトの検索機能を最大限に活用できます。検索URLのテンプレート（例: `https://www.example.com/search?q={query}`）を指定するだけで、検索語を埋め込んで直接検索を実行できます。これにより、専門的なデータベースや社内ツールなど、Google検索では対応しきれないサイトでも、この拡張機能から直接検索が可能になります。

### 2. 直感的な管理UI

* **ポップアップUI**: ブラウザのツールバーアイコンをクリックすると表示されるポップアップには、設定済みの検索ボックスが一覧で表示されます。各検索ボックスには、検索語入力欄と検索実行ボタンが配置されており、すぐに検索を開始できます。また、各検索ボックスの右横には編集ボタン（鉛筆アイコン）が配置されており、クリックすることでその検索ボックスの編集フォームがポップアップ内に表示されます。
* **オプションページUI**: より詳細な設定や管理を行うための専用ページです。ここでは、検索ボックスの追加、編集、削除だけでなく、ドラッグ＆ドロップによる並び替え機能が提供されています。これにより、利用頻度に応じて検索ボックスの表示順を自由にカスタマイズし、アクセス性を向上させることができます。

### 3. データ管理機能

* **データの永続化**: 作成した検索ボックスの設定は、ブラウザのローカルストレージ（`chrome.storage.local`）に保存されます。これにより、ブラウザを閉じたり再起動したりしても、設定が失われることはありません。
* **インポート/エクスポート**: 設定データをJSONファイルとしてエクスポートし、必要に応じてインポートする機能を提供します。これは、設定のバックアップ、複数のデバイス間での設定同期、または他のユーザーとの設定共有に非常に便利です。

### 4. ユーザーエクスペリエンス

* **ダークモード対応**: オペレーティングシステム（OS）のカラースキーム設定（ダークモード/ライトモード）に自動的に適応するよう設計されています。これにより、システム設定と一貫した快適な視覚体験を提供します。
* **レスポンシブデザイン**: オプションページは、異なる画面サイズや解像度に対応できるようレスポンシブに設計されており、様々なデバイスで快適に利用できます.

## インストール方法

1.  このリポジトリをダウンロードするか、Gitを使ってクローンします。
    ```bash
    git clone [https://github.com/nakashun-mf/search_extensions.git](https://github.com/nakashun-mf/search_extensions.git)
    ```
2.  Google Chromeを開き、アドレスバーに `chrome://extensions` と入力して拡張機能管理ページにアクセスします。
3.  ページの右上にある「デベロッパーモード」のトグルスイッチをオンにします。
4.  「パッケージ化されていない拡張機能を読み込む」ボタンをクリックします。
5.  ダウンロードまたはクローンした `search_extensions` ディレクトリ（`manifest.json` が含まれるフォルダ）を選択します。
6.  これで「カスタム検索ボックス」拡張機能がChromeにインストールされ、ブラウザのツールバーにアイコンが表示されます。

## 使い方

### ポップアップからの検索

1.  ブラウザのツールバーにある「カスタム検索ボックス」のアイコン（設定したアイコン、デフォルトでは青い四角）をクリックします。
2.  表示されるポップアップには、設定済みのカスタム検索ボックスが一覧表示されます.
3.  検索したいボックスの入力欄にキーワードを入力します.
4.  入力欄の右側にある虫眼鏡アイコンのボタンをクリックするか、入力欄で `Enter` キーを押すと、新しいタブで検索結果が表示されます.

### 検索ボックスの追加・編集・削除（オプションページ）

1.  拡張機能アイコンを右クリックし、コンテキストメニューから「オプション」を選択します。または、`chrome://extensions` ページから「カスタム検索ボックス」の詳細設定に入り、「拡張機能のオプション」をクリックします。
2.  オプションページ上部の「＋ 新しい検索ボックスを追加」ボタンをクリックすると、新しい検索ボックスの追加フォームが表示されます.
3.  既存の検索ボックスを編集するには、一覧から該当するボックスの右側にある「編集」ボタンをクリックします.
4.  編集フォームで「簡単モード」または「カスタムモード」を選択し、以下の情報を入力します。
    * **ラベル**: 検索ボックスの名前（例: 「Google検索」「Wikipedia」「Qiita」など）。
    * **先頭に付ける文字列（簡単モードのみ）**: Google検索のキーワードとして検索語の前に付与される文字列（例: 「wiki」と設定すると「wiki 検索語」で検索）。
    * **検索URL（カスタムモードのみ）**: 検索を行うウェブサイトのURL。検索キーワードを埋め込みたい箇所に `{query}` と記述します（例: `https://www.google.com/search?q={query}` または `https://www.example.com/search?query={query}&sort=relevance`）。
5.  入力後、「保存」ボタンをクリックして設定を保存します.
6.  検索ボックスを削除するには、オプションページの一覧から該当するボックスの右側にある「削除」ボタンをクリックします.

### 検索ボックスの並び替え（オプションページ）

1.  オプションページで、各検索ボックスの右端にある「☰」アイコン（ドラッグハンドル）をクリックし、上下にドラッグすることで、表示順を自由に並び替えることができます.

### 設定のエクスポートとインポート

1.  オプションページ下部にある「エクスポート」ボタンをクリックすると、現在の検索ボックス設定が `searchBoxes.json` というファイル名でダウンロードされます.
2.  設定をインポートするには、「インポート」の横にある「ファイルを選択」ボタンをクリックし、エクスポートしたJSONファイルを選択します。インポートが完了すると、設定が反映され、リストが更新されます.

## 開発者向け

### プロジェクト構成

* `manifest.json`: 拡張機能のコア設定ファイル。名前、バージョン、説明、必要なパーミッション（`storage`）、ポップアップHTML (`popup.html`)、オプションページHTML (`options.html`)、アイコンパスなどが定義されています。
* `popup.html`, `popup.css`, `popup.js`: 拡張機能アイコンクリック時に表示されるポップアップウィンドウのユーザーインターフェースと、検索ロジックおよびドラッグ＆ドロップによる並び替え機能の実装が含まれます。
* `options.html`, `options.css`, `options.js`: 拡張機能の詳細設定を行うためのオプションページのユーザーインターフェースと、検索ボックスの追加・編集・削除、並び替え、インポート・エクスポート機能の実装が含まれます。
* `icon16.png`, `icon48.png`, `icon128.png`: 拡張機能が使用する各種サイズのアイコンファイルです。

### 使用技術

* **HTML5**: ウェブページの構造を定義します.
* **CSS3**: UIのスタイルとデザインを定義します。ダークモード対応のための `@media (prefers-color-scheme: dark)` クエリも使用されています.
* **JavaScript**: 拡張機能の主要なロジックを実装します。特に、Chrome Extension API の `chrome.storage.local` を利用して、ユーザー設定の永続化と取得を行っています。
* **Chrome Extension API**:
    * `chrome.storage.local`: ユーザーのローカル環境にデータを保存・取得するために使用されます。検索ボックスの設定はここに保存されます.
    * `DOM manipulation`: `document.createElement`, `innerHTML`, `addEventListener` などを用いて、動的なUIの生成とイベントハンドリングを行っています.
    * `Drag and Drop API`: 検索ボックスの並び替え機能を実現するために使用されています.

## 貢献

本プロジェクトへの貢献を歓迎します。機能改善やバグ修正の提案、プルリクエストをお待ちしております。